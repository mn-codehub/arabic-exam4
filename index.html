<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>آزمون عربی پایه هفتم</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
 font-family:tahoma;
 background:#f5f6fa;
 direction:rtl;
 text-align:center;
 margin:0
}
.container{
 max-width:500px;
 background:#fff;
 margin:20px auto;
 padding:20px;
 border-radius:16px;
 box-shadow:0 8px 20px rgba(0,0,0,.1)
}
h3{margin:10px 0}
button{
 width:100%;
 padding:12px;
 margin:6px 0;
 border:none;
 border-radius:12px;
 background:#0984e3;
 color:#fff;
 font-size:15px
}
button:disabled{background:#b2bec3}
#timer{color:#d63031;font-weight:bold}
.option{background:#dfe6e9;color:#000}
table{
 width:100%;
 border-collapse:collapse;
 margin-top:15px
}
th,td{
 border:1px solid #ccc;
 padding:6px;
 font-size:14px
}
.highlight{
 color:#d63031;
 font-weight:bold
}
</style>
</head>

<body>

<div class="container" id="loginBox">
<h3>آزمون عربی پایه هفتم</h3>
<p><b>دبیر:</b> بخشعلی‌زاده</p>
<p><b>طراح:</b> مرجان قاسمیان – هفتم چهار</p>
<input id="studentName" placeholder="نام و نام خانوادگی">
<button onclick="start()">شروع آزمون</button>
</div>

<div class="container" id="examBox" style="display:none">
<p id="timer">⏱ 60</p>
<h4 id="question"></h4>
<div id="options"></div>
<p id="feedback"></p>
</div>

<div class="container" id="resultBox" style="display:none"></div>

<audio id="ok" src="https://www.soundjay.com/buttons/sounds/button-4.mp3"></audio>
<audio id="bad" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
/* ==== سوالات (۴۰ سوال) ==== */
const allQuestions = [
 {q:"ترجمهٔ واژهٔ مشخص شده در کدام گزینه آمده است؟ (اَلجَنَّةُ تَحتَ <span class='highlight'>أقدام</span> الاُمَّهاتِ.)",
  o:["پا","دست‌ها","دست","پاها"],a:3},
 {q:"در جای خالی ( ......... الطفلُ؟ الطفلُ عِندَ أُمِه) کلمه پرسشی مناسب قرار دهید؟",
  o:["أینَ","ما","مَن","هَل"],a:0},
 {q:"کدام کلمه در این جمله به معنای «زبان» است؟ (سُکوتُ اللسان سَلامَهُ الإنسان.)",
  o:["سکوتُ","اللسان","سلامه","الانسان"],a:1},
 {q:"املای کدام گزینه غلط است؟",
  o:["البقره","الدیک","مریمٌ","کتابٌ"],a:2},
 {q:"دقیق‌ترین ترجمه کلمه «شاعره» چیست؟",
  o:["یک شاعر مرد","یک شاعر زن","دو شاعر زن","دو شاعر مؤنث"],a:1},
 {q:"کدام گزینه صفت است؟",
  o:["الطبیبه","الناجحه","الشجره","الطالبه"],a:1},
 {q:"کدام کلمه با بقیه گزینه‌ها متفاوت است؟",
  o:["کاتِب","سائق","صَدیق","مُدرس"],a:2},
 {q:"جملهٔ پرسشی مناسب این جواب کدام است؟ (أنا مُدیرُ المَدرَسَهِ)",
  o:["مَن أنتَ؟","مَن هو؟","مَن هي؟","مَن أنتِ؟"],a:0},
 {q:"کدام اسم، این کلمه را کامل می‌کند؟ (هاتانِ ...)",
  o:["رَجُلانِ","بَنتانِ","ممَنوعانِ","جَبَلانِ"],a:1},
 {q:"متضاد کدام کلمه صحیح نیست؟",
  o:["قَلیل ≠ قَریب","وَحده ≠ جَماعَه","جالِس ≠ واقف","صَدیق ≠ عَدوّ"],a:0},

 /* بقیه سوال‌ها بدون تغییر */
];

const TOTAL = 10;
let questions=[],index=0,score=0,time=60,timer;

function start(){
 if(localStorage.getItem("exam_done")){
  alert("شما قبلاً در آزمون شرکت کرده‌اید");
  return;
 }
 let n=studentName.value.trim();
 if(!n){alert("نام را وارد کنید");return;}

 questions = allQuestions.sort(()=>0.5-Math.random()).slice(0,TOTAL);

 loginBox.style.display="none";
 examBox.style.display="block";
 timer=setInterval(tick,1000);
 showQ();
}

function tick(){
 time--;
 timer.innerText="⏱ "+time;
 if(time<=0) finish();
}

function showQ(){
 if(index>=questions.length){finish();return;}
 let q=questions[index];
 question.innerHTML=q.q;
 options.innerHTML="";
 q.o.forEach((op,i)=>{
  let b=document.createElement("button");
  b.className="option";
  b.innerText=op;
  b.onclick=()=>answer(i);
  options.appendChild(b);
 });
}

function answer(i){
 let q=questions[index];
 document.querySelectorAll("button").forEach(b=>b.disabled=true);
 if(i===q.a){
  score++; ok.play();
  feedback.innerText="✔ پاسخ درست";
 }else{
  bad.play();
  feedback.innerText="✖ پاسخ نادرست";
 }
 setTimeout(()=>{
  feedback.innerText="";
  index++;
  showQ();
 },700);
}

function finish(){
 clearInterval(timer);
 localStorage.setItem("exam_done","yes");

 let records=JSON.parse(localStorage.getItem("records")||"[]");
 records.push({name:studentName.value,score});
 localStorage.setItem("records",JSON.stringify(records));

 let max=Math.max(...records.map(r=>r.score));
 let rows=records.map(r=>`<tr><td>${r.name}</td><td>${r.score}</td></tr>`).join("");

 examBox.style.display="none";
 resultBox.innerHTML=`
 <h3>پایان آزمون</h3>
 <p>نمره شما: ${score} از 10</p>
 <table>
 <tr><th>نام</th><th>نمره</th></tr>
 ${rows}
 </table>
 <p>تعداد شرکت‌کنندگان: ${records.length}</p>
 <p>بالاترین نمره: ${max}</p>
 `;
 resultBox.style.display="block";
}
</script>

</body>
</html>
